trigger: none
pool:
  name: Default

variables:
  terraformDirectory: '.'
  azureServiceConnection: 'prashanthscn'

stages:
  - stage: Terraform
    displayName: 'Terraform Stage'
    jobs:
      - job: TerraformJob
        displayName: 'Run Terraform'
        steps:
          - checkout: self

          - task: AzureCLI@2
            displayName: 'Terraform Init'
            inputs:
              azureSubscription: $(azureServiceConnection)
              scriptType: bash
              scriptLocation: inlineScript
              workingDirectory: $(terraformDirectory)
              inlineScript: |
                terraform init
