trigger: none

variables:
  azureServiceConnection: '58050a78-613a-43fc-a919-00c9cbc7d651'
  terraformDirectory: './'

stages:
  - stage: Terraform
    displayName: 'Terraform Provisioning Stage'
    jobs:
      - job: terraform
        displayName: 'Terraform Workflow'
        pool:
          name: Default

        steps:
          - task: Checkout@1
            displayName: 'Checkout Source Code'

          - task: AzureCLI@2
            displayName: 'Terraform Init'
            inputs:
              azureSubscription: $(azureServiceConnection)
              scriptType: bash
              scriptLocation: inlineScript
              workingDirectory: $(terraformDirectory)
              inlineScript: |
                terraform init
